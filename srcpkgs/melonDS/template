# Template file for 'melonDS'
pkgname=melonDS
version=0.8.2
revision=1
build_style=cmake
hostmakedepends="glib-devel pkgconf"
makedepends="gtk+3-devel libcurl-devel libpcap-devel SDL2-devel"
short_desc="Fast and accurate Nintendo DS emulator"
maintainer="Adrian Siekierka <kontakt@asie.pl>"
license="GPL-3.0-or-later"
homepage="http://melonds.kuribo64.net/"
distfiles="https://github.com/Arisotura/melonDS/archive/${version}.tar.gz"
checksum=ceafb8d012df6205ee8d84602487d54824cc561c281eaa5e3d5dd07cb0f41415

# upstream always compiles with -no-pie
nopie=yes

do_patch() {
	# TODO: LTO compilation seems to be broken
	vsed -i CMakeLists.txt -e "s; -flto;;g"
}
